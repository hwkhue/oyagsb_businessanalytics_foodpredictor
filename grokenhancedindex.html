<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Food Consumption Predictor</title>
  <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone@7.20.15/babel.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.4.3/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="min-h-screen bg-gray-100 dark:bg-gray-900 flex items-center justify-center">
  <div id="root"></div>
  <script type="text/babel">
    const MODEL_CONSTANTS = {
      INTERCEPT: -1.1183,
      INCOME_COEFF: 0.1482,
      FAMILY_SIZE_COEFF: 0.7931,
    };

    const formatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });

    function FoodPredictor() {
      const [income, setIncome] = React.useState('');
      const [familySize, setFamilySize] = React.useState('');
      const [result, setResult] = React.useState(null);
      const [error, setError] = React.useState('');

      const validateInputs = (incomeVal, familySizeVal) => {
        const incomeNum = parseFloat(incomeVal);
        const familySizeNum = parseInt(familySizeVal);

        if (incomeVal !== '' && (isNaN(incomeNum) || incomeNum < 0)) {
          setError('Income must be a positive number.');
          return false;
        }
        if (familySizeVal !== '' && (isNaN(familySizeNum) || familySizeNum < 1)) {
          setError('Family size must be a positive integer.');
          return false;
        }
        if (incomeNum > 1000000) {
          setError('Income cannot exceed $1,000,000.');
          return false;
        }
        if (familySizeNum > 20) {
          setError('Family size cannot exceed 20.');
          return false;
        }
        setError('');
        return true;
      };

      const calculateFoodCost = () => {
        const incomeNum = parseFloat(income);
        const familySizeNum = parseInt(familySize);

        if (!validateInputs(income, familySize)) {
          setResult(null);
          return;
        }

        const foodCost = Math.max(
          0,
          MODEL_CONSTANTS.INTERCEPT +
            MODEL_CONSTANTS.INCOME_COEFF * incomeNum +
            MODEL_CONSTANTS.FAMILY_SIZE_COEFF * familySizeNum
        );
        setResult(formatter.format(foodCost));
      };

      const resetForm = () => {
        setIncome('');
        setFamilySize('');
        setResult(null);
        setError('');
      };

      const handleKeyPress = (e) => {
        if (e.key === 'Enter') calculateFoodCost();
      };

      return (
        <div className="max-w-md mx-auto bg-white dark:bg-gray-800 p-8 rounded-lg shadow-lg space-y-6">
          <h1 className="text-2xl font-bold text-center text-gray-900 dark:text-white">
            Food Consumption Predictor
          </h1>
          <div className="space-y-4">
            <div>
              <label
                htmlFor="income"
                className="block text-sm font-medium text-gray-700 dark:text-gray-300"
              >
                Income (USD)
              </label>
              <input
                id="income"
                type="number"
                value={income}
                onChange={(e) => {
                  setIncome(e.target.value);
                  validateInputs(e.target.value, familySize);
                }}
                onKeyPress={handleKeyPress}
                className={`mt-1 block w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${
                  error.includes('Income') ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'
                } bg-white dark:bg-gray-700 text-gray-900 dark:text-white`}
                placeholder="Enter income in dollars"
                step="any"
                aria-label="Income in dollars"
              />
            </div>
            <div>
              <label
                htmlFor="familySize"
                className="block text-sm font-medium text-gray-700 dark:text-gray-300"
              >
                Family Size
              </label>
              <input
                id="familySize"
                type="number"
                value={familySize}
                onChange={(e) => {
                  setFamilySize(e.target.value);
                  validateInputs(income, e.target.value);
                }}
                onKeyPress={handleKeyPress}
                className={`mt-1 block w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ${
                  error.includes('Family size') ? 'border-red-500' : 'border-gray-300 dark:border-gray-600'
                } bg-white dark:bg-gray-700 text-gray-900 dark:text-white`}
                placeholder="Enter family size"
                min="1"
                step="1"
                aria-label="Family size"
              />
            </div>
            <div className="flex space-x-4">
              <button
                onClick={calculateFoodCost}
                className="flex-1 bg-blue-600 text-white p-2 rounded-md hover:bg-blue-700 transition duration-200 disabled:bg-gray-400"
                disabled={!!error || !income || !familySize}
              >
                Predict Food Cost
              </button>
              <button
                onClick={resetForm}
                className="flex-1 bg-gray-500 text-white p-2 rounded-md hover:bg-gray-600 transition duration-200"
              >
                Clear
              </button>
            </div>
            {error && (
              <p className="text-red-500 text-center animate-fade-in">{error}</p>
            )}
            {result && (
              <p className="text-green-600 dark:text-green-400 text-center text-lg font-semibold animate-fade-in">
                Predicted Monthly Food Cost: {result}
              </p>
            )}
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<FoodPredictor />);
  </script>
  <style>
    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-fade-in {
      animation: fade-in 0.5s ease-in;
    }
  </style>
</body>
</html>